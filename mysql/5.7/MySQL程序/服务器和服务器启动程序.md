# 服务器和服务器启动程序
## MySQL服务器
```
MySQL是一个独立的多线程程序

mysqld -verbose --help 帮助文档

```
## mysql_safe--mysql服务器的启动脚本
```
note:
从 rpm or debian 安装 mysql , system 管理着 对 mysql  start  or stop。(所以 mysql_safe 没有安装)


mysqld_safe  会启动并且调用 执行  mysqld .  mysqld_safe 必须使用--mysqld  or mysqld-version 选项,夜可以指定 --ledir 去相应的位置去查找服务器目录


在命令行 指定mysqld_safe 不知道的选项的时候会被传递到mysqld,如果在  [mysqld_safe] 里面指定选项，在mysqld会被忽略。


mysqld_safe  从the [mysqld], [server], and [mysqld_safe]读取选项组的数据



mysqld_safe也读取[safe_mysqld]部分，但要保持最新，您应该将这些部分重命名为 [mysqld_safe].


mysqld_safe Options


--basedir	Path to MySQL installation directory
  	mysql的安装目录
--core-file-size	Size of core file that mysqld should be able to create	
   	mysqld core file的大小限制(ulimit -c)
--datadir	Path to data directory		
  
--defaults-extra-file	Read named option file in addition to usual option files
  选项的文件配置 
  加载优先于 .mycnf(default-file or ~/.mycnf)  但是 落后于/etc/.mycnf	
--defaults-file	Read only named option file
  	仅使用给定的选项文件。如果该文件不存在或无法访问，则服务器将退出并出现错误
    如果给定目录 到相应的目录寻找 .my.cnf文件
    如果不知道 也会到  ~/.mycnf 查看是否存在选项文件
--help	Display help message and exit
 	
--ledir	Path to directory where server is located	
  如果mysqld_safe找不到服务器，则使用此选项指示服务器所在目录的路径名。
  从MySQL5.7 版本起不支持文件选项 指令通过命令行的文件选项指定	
--log-error	Write error log to named file		

--malloc-lib	Alternative malloc library to use for mysqld	
    用来替代system malloc() libray(内存分配的一个选项)
    从 MySQL 5.7.15 开始，选项值必须是目录/usr/lib、 /usr/lib64、 /usr/lib/i386-linux-gnu或 /usr/lib/x86_64-linux-gnu. 

    <=MySQL 5.7.15  任何库都可以通过指定其路径名来使用

    note:  
    从 MySQL 5.7.13 开始，MySQL 发行版不再包含tcmalloc库。

   LD_PRELOAD(mysqld_safe 环境变量设置)
   --malloc-lib 通过修改 LD_PRELOAD 来影响程序加载程序能够使程序能够找到内存分配库
   
   note:当指定LD_RELOAD 的时候 --malloc-lib指定不能使用全路径(full path)

  
   在 system(rpm or debian package download) 管理的可以通过 LD_PRELOAD 
   在/etc/sysconfig/mysql里面设置，用于分配库的动态加载地址
   
   非完整路径
   LD_PRELOAD+“/”+tcmalloc
   [mysqld_safe]
        malloc-lib=tcmalloc

 若未指定 LD_RELOAD 环境变量
[mysqld_safe]
malloc-lib=/opt/lib/libtcmalloc_minimal.so

--mysqld	Name of server program to start (in ledir directory)		
    --ledir 服务器目录
    --mysqld 服务器名称
    

--mysqld-safe-log-timestamps	Timestamp format for logging	5.7.11	
    次选项支出的版本>= MySql5.7.11
    UTC 默认值日志
    SYSTEM 和服务器一样本地时间
    HYPHEN  YY-MM-DD h:mm:ss格式，如 MySQL 5.6 的mysqld_safe。
    LEGACY  YYMMDD hh:mm:ss格式，如 MySQL 5.6 之前 的mysqld_safe .
--mysqld-version	Suffix for server program name	
   服务器名称的后缀
    
--nice	Use nice program to set server scheduling priority		
--no-defaults	Read no option files		
--open-files-limit	Number of files that mysqld should be able to open		
--pid-file	Path name of server process ID file		
--plugin-dir	Directory where plugins are installed		
--port	Port number on which to listen for TCP/IP connections		
--skip-kill-mysqld	Do not try to kill stray mysqld processes		
--skip-syslog	Do not write error messages to syslog; use error log file		Yes
--socket	Socket file on which to listen for Unix socket connections		
--syslog	Write error messages to syslog		Yes
--syslog-tag	Tag suffix for messages written to syslog		Yes
--timezone	Set TZ time zone environment variable to named value		
--user	Run mysqld as user having name user_name or numeric user ID user_id		

```